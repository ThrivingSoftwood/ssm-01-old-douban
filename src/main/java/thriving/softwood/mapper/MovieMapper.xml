<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="thriving.softwood.mapper.MovieMapper">
    <resultMap id="BaseResultMap" type="thriving.softwood.pojo.entity.Movie">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Jan 15 18:52:49 CST 2026.
        -->
        <id column="id" jdbcType="BIGINT" property="id"/>
        <result column="movie_cn_name" jdbcType="VARCHAR" property="movieCnName"/>
        <result column="movie_fg_name" jdbcType="VARCHAR" property="movieFgName"/>
        <result column="movie_actor" jdbcType="VARCHAR" property="movieActor"/>
        <result column="movie_director" jdbcType="VARCHAR" property="movieDirector"/>
        <result column="movie_detail" jdbcType="VARCHAR" property="movieDetail"/>
        <result column="movie_duration" jdbcType="VARCHAR" property="movieDuration"/>
        <result column="movie_type" jdbcType="VARCHAR" property="movieType"/>
        <result column="movie_score" jdbcType="REAL" property="movieScore"/>
        <result column="movie_box_office" jdbcType="REAL" property="movieBoxOffice"/>
        <result column="movie_comment_count" jdbcType="BIGINT" property="movieCommentCount"/>
        <result column="movie_release_date" jdbcType="DATE" property="movieReleaseDate"/>
        <result column="movie_country" jdbcType="VARCHAR" property="movieCountry"/>
        <result column="movie_picture" jdbcType="VARCHAR" property="moviePicture"/>
        <result column="movie_state" jdbcType="INTEGER" property="movieState"/>
        <result column="create_time" jdbcType="TIMESTAMP" property="createTime"/>
        <result column="update_time" jdbcType="TIMESTAMP" property="updateTime"/>
    </resultMap>

    <!--手动方法 begin-->

    <select id="get" parameterType="thriving.softwood.pojo.dto.MovieDTO" resultMap="BaseResultMap">
        select id, movie_cn_name, movie_fg_name, movie_actor, movie_director, movie_detail,
        movie_duration, movie_type, movie_score, movie_box_office, movie_comment_count, movie_release_date,
        movie_country, movie_picture, movie_state, create_time, update_time
        from movie
        <where>
            <if test="id != null">
                and id = #{id}
            </if>
        </where>
        limit 1
    </select>


    <select id="list" parameterType="thriving.softwood.pojo.dto.MovieDTO" resultMap="BaseResultMap">
        select id, movie_cn_name, movie_fg_name, movie_actor, movie_director, movie_detail,
        movie_duration, movie_type, movie_score, movie_box_office, movie_comment_count, movie_release_date,
        movie_country, movie_picture, movie_state, create_time, update_time
        from movie
        <where>
            <if test="movieState != null">
                and movie_state = #{movieState}
            </if>
            <if test="movieType !=null and movieType != ''">
                and movie_type like concat('%',#{movieType},'%')
            </if>
            <if test="movieCountry !=null and movieCountry != ''">
                and movie_country like concat('%',#{movieCountry},'%')
            </if>
            <if test="movieReleaseYear !=null and movieReleaseYear != ''">
                and year(a.movie_release_date) = #{movieReleaseYear}
            </if>
            <if test="minScore !=null">
                and movie_score >= #{minScore}
            </if>
        </where>
        <if test="orderByClause != null and !orderByClause.isEmpty()">
            <foreach collection="orderByClause" index="key" item="value" open="order by" separator="," close="">
                ${key} ${value}
            </foreach>
        </if>
    </select>

    <!--手动方法 end-->

    <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Jan 15 18:52:49 CST 2026.
        -->
        delete from movie
        where id = #{id,jdbcType=BIGINT}
    </delete>
    <insert id="insert" parameterType="thriving.softwood.pojo.entity.Movie">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Jan 15 18:52:49 CST 2026.
        -->
        insert into movie (id, movie_cn_name, movie_fg_name,
        movie_actor, movie_director, movie_detail,
        movie_duration, movie_type, movie_score,
        movie_box_office, movie_comment_count, movie_release_date,
        movie_country, movie_picture, movie_state,
        create_time, update_time)
        values (#{id,jdbcType=BIGINT}, #{movieCnName,jdbcType=VARCHAR}, #{movieFgName,jdbcType=VARCHAR},
        #{movieActor,jdbcType=VARCHAR}, #{movieDirector,jdbcType=VARCHAR}, #{movieDetail,jdbcType=VARCHAR},
        #{movieDuration,jdbcType=VARCHAR}, #{movieType,jdbcType=VARCHAR}, #{movieScore,jdbcType=REAL},
        #{movieBoxOffice,jdbcType=REAL}, #{movieCommentCount,jdbcType=BIGINT}, #{movieReleaseDate,jdbcType=DATE},
        #{movieCountry,jdbcType=VARCHAR}, #{moviePicture,jdbcType=VARCHAR}, #{movieState,jdbcType=INTEGER},
        #{createTime,jdbcType=TIMESTAMP}, #{updateTime,jdbcType=TIMESTAMP})
    </insert>
    <update id="updateByPrimaryKey" parameterType="thriving.softwood.pojo.entity.Movie">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Jan 15 18:52:49 CST 2026.
        -->
        update movie
        set movie_cn_name = #{movieCnName,jdbcType=VARCHAR},
        movie_fg_name = #{movieFgName,jdbcType=VARCHAR},
        movie_actor = #{movieActor,jdbcType=VARCHAR},
        movie_director = #{movieDirector,jdbcType=VARCHAR},
        movie_detail = #{movieDetail,jdbcType=VARCHAR},
        movie_duration = #{movieDuration,jdbcType=VARCHAR},
        movie_type = #{movieType,jdbcType=VARCHAR},
        movie_score = #{movieScore,jdbcType=REAL},
        movie_box_office = #{movieBoxOffice,jdbcType=REAL},
        movie_comment_count = #{movieCommentCount,jdbcType=BIGINT},
        movie_release_date = #{movieReleaseDate,jdbcType=DATE},
        movie_country = #{movieCountry,jdbcType=VARCHAR},
        movie_picture = #{moviePicture,jdbcType=VARCHAR},
        movie_state = #{movieState,jdbcType=INTEGER},
        create_time = #{createTime,jdbcType=TIMESTAMP},
        update_time = #{updateTime,jdbcType=TIMESTAMP}
        where id = #{id,jdbcType=BIGINT}
    </update>
    <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Jan 15 18:52:49 CST 2026.
        -->
        select id, movie_cn_name, movie_fg_name, movie_actor, movie_director, movie_detail,
        movie_duration, movie_type, movie_score, movie_box_office, movie_comment_count, movie_release_date,
        movie_country, movie_picture, movie_state, create_time, update_time
        from movie
        where id = #{id,jdbcType=BIGINT}
    </select>
    <select id="selectAll" resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Jan 15 18:52:49 CST 2026.
        -->
        select id, movie_cn_name, movie_fg_name, movie_actor, movie_director, movie_detail,
        movie_duration, movie_type, movie_score, movie_box_office, movie_comment_count, movie_release_date,
        movie_country, movie_picture, movie_state, create_time, update_time
        from movie
    </select>
</mapper>