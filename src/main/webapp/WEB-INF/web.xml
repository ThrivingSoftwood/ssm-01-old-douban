<!DOCTYPE web-app PUBLIC
        "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
        "http://java.sun.com/dtd/web-app_2_3.dtd" >

<web-app xmlns="https://jakarta.ee/xml/ns/jakartaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/web-app_6_0.xsd"
         version="6.0">
    <!-- ==================================================================== -->
    <!-- Log4j2 æ ¸å¿ƒé…ç½®                                                       -->
    <!-- ==================================================================== -->

    <!-- 1. æ˜Žç¡®æŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„ -->
    <context-param>
        <param-name>log4jConfiguration</param-name>
        <param-value>WEB-INF/classes/configuration/logging/log4j2.xml</param-value>
    </context-param>

    <!-- 2. å¼ºåˆ¶ Log4j2 ä½¿ç”¨ Servlet 6 (Jakarta) å…¼å®¹æ¨¡å¼ -->
    <!--
       è¿™é€šå¸¸æ˜¯è‡ªåŠ¨çš„ï¼Œä½†æ˜¾å¼å£°æ˜Žä¸Šä¸‹æ–‡ç›‘å¬å™¨åœ¨ Spring 7 çŽ¯å¢ƒä¸‹æ›´ä¿é™©ï¼Œ
       ç‰¹åˆ«æ˜¯å½“ä½ é‡åˆ° "Log4j2 not initialized" é”™è¯¯æ—¶ã€‚
       æ³¨æ„ï¼šLog4j 2.19+ çš„ artifact ä¸­åŒ…å«çš„æ˜¯ Jakarta ç‰ˆæœ¬çš„ Listenerã€‚
    -->
    <listener>
        <listener-class>org.apache.logging.log4j.web.Log4jServletContextListener</listener-class>
    </listener>


    <!-- ==================================================================== -->
    <!-- Spring MVC é…ç½®                                                      -->
    <!-- ==================================================================== -->


    <!--å‰ç«¯è°ƒåº¦å™¨ dispatchServlet-->
    <servlet>
        <servlet-name>dispatcherServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <!--é…ç½®æ–‡ä»¶è·¯å¾„-->
            <param-name>contextConfigLocation</param-name>
            <param-value>classpath:configuration/spring/spring-mvc.xml</param-value>
        </init-param>
        <!--å¯åŠ¨æ—¶åŠ è½½-->
        <load-on-startup>1</load-on-startup>

        <!-- ðŸ”¥ å¿…é¡»æ·»åŠ ä»¥ä¸‹é…ç½®ï¼Œå¦åˆ™ StandardServletMultipartResolver æ— æ•ˆ -->
        <multipart-config>
            <!-- ä¸Šä¼ æ–‡ä»¶çš„ä¸´æ—¶å­˜å‚¨ç›®å½•ï¼Œå¿…é¡»å­˜åœ¨ -->
            <!-- å¦‚æžœä¸æŒ‡å®šï¼ŒServlet å®¹å™¨ä¼šä½¿ç”¨é»˜è®¤ä¸´æ—¶ç›®å½• -->
            <!-- <location>/tmp/tomcat-upload</location> -->

            <!-- å•ä¸ªæ–‡ä»¶æœ€å¤§å€¼ (ä¾‹å¦‚ 10MB) -->
            <max-file-size>10485760</max-file-size>

            <!-- å•æ¬¡è¯·æ±‚æ€»æ–‡ä»¶æœ€å¤§å€¼ (ä¾‹å¦‚ 20MB) -->
            <max-request-size>20971520</max-request-size>

            <!-- å†…å­˜é˜ˆå€¼ï¼Œè¶…è¿‡æ­¤å€¼å†™å…¥ç£ç›˜ (ä¾‹å¦‚ 4KB) -->
            <file-size-threshold>4096</file-size-threshold>
        </multipart-config>
    </servlet>
    <servlet-mapping>
        <servlet-name>dispatcherServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <!--ç¼–ç è¿‡æ»¤å™¨ filter-->
    <filter>
        <filter-name>characterEncoding</filter-name>
        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
        <init-param>
            <!--è®¾ç½®ç¼–ç æ ¼å¼-->
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
        <init-param>
            <!--è®¾ç½®è¯·æ±‚å’Œå“åº”éƒ½å¼ºåˆ¶ä¸º encoding çš„ç¼–ç -->
            <param-name>forceEncoding</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>characterEncoding</filter-name>
        <servlet-name>dispatcherServlet</servlet-name>
    </filter-mapping>

    <!--æ”¯æŒ rest æŽ¥å£(Restful API)çš„è¿‡æ»¤å™¨-->
    <filter>
        <filter-name>hiddenHttpMethodFilter</filter-name>
        <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>hiddenHttpMethodFilter</filter-name>
        <servlet-name>dispatcherServlet</servlet-name>
    </filter-mapping>

    <!-- ==================================================================== -->
    <!-- Spring é…ç½®                                                      -->
    <!-- ==================================================================== -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <context-param>
        <!--é…ç½®å…¨å±€å‚æ•°æŒ‡å®šé…ç½®æ–‡ä»¶-->
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:configuration/spring/spring-core.xml</param-value>
    </context-param>

    <!--è®¾ç½®æ¬¢è¿Žé¡µ-->
    <welcome-file-list>
        <welcome-file>mainPage.jsp</welcome-file>
    </welcome-file-list>
</web-app>